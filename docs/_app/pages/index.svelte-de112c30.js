import{J as H,S as J,i as K,s as R,l as L,k as I,n as N,f as b,e as k,t as w,c as y,a as g,g as D,d as u,b as M,K as O,H as v,h as S,L as U,M as G,N as Q,I as A,O as V,P as W}from"../chunks/vendor-2bddb9ee.js";const C=H(new Date,function(e){const t=setInterval(()=>{e(new Date)},1e3);return function(){clearInterval(t)}});function q(r,e,t){const s=r.slice();return s[5]=e[t][0],s[6]=e[t][1],s[8]=t,s}function B(r,e,t){const s=r.slice();return s[9]=e[t],s}function X(r){let e,t=r[3].format(r[2])+"",s;return{c(){e=k("li"),s=w(t),this.h()},l(l){e=y(l,"LI",{class:!0});var i=g(e);s=D(i,t),i.forEach(u),this.h()},h(){M(e,"class","day-label svelte-c5cct2")},m(l,i){b(l,e,i),v(e,s)},p(l,i){i&4&&t!==(t=l[3].format(l[2])+"")&&S(s,t)},d(l){l&&u(e)}}}function Y(r){let e,t=r[5]+"",s;return{c(){e=k("li"),s=w(t),this.h()},l(l){e=y(l,"LI",{class:!0});var i=g(e);s=D(i,t),i.forEach(u),this.h()},h(){M(e,"class","day-label svelte-c5cct2")},m(l,i){b(l,e,i),v(e,s)},p(l,i){i&1&&t!==(t=l[5]+"")&&S(s,t)},d(l){l&&u(e)}}}function T(r){let e;return{c(){e=k("span"),this.h()},l(t){e=y(t,"SPAN",{class:!0}),g(e).forEach(u),this.h()},h(){M(e,"class","green-dot svelte-c5cct2")},m(t,s){b(t,e,s)},d(t){t&&u(e)}}}function z(r){let e,t,s,l=r[9].summary+"",i,d,o,n=r[9].start+"",c,a,_=r[9].end+"",f,E,m=r[9].startMs<=r[1]&&r[9].endMs>=r[1]&&T();return{c(){e=k("li"),m&&m.c(),t=I(),s=k("span"),i=w(l),d=I(),o=k("span"),c=w(n),a=w(" - "),f=w(_),E=I(),this.h()},l(h){e=y(h,"LI",{class:!0});var p=g(e);m&&m.l(p),t=N(p),s=y(p,"SPAN",{class:!0});var P=g(s);i=D(P,l),P.forEach(u),d=N(p),o=y(p,"SPAN",{class:!0});var j=g(o);c=D(j,n),a=D(j," - "),f=D(j,_),j.forEach(u),E=N(p),p.forEach(u),this.h()},h(){M(s,"class","event svelte-c5cct2"),M(o,"class","time svelte-c5cct2"),M(e,"class","svelte-c5cct2"),O(e,"starting",r[9].startMs-6e5<=r[1]&&r[9].startMs+3e5>=r[1]),O(e,"active",r[9].startMs<=r[1]&&r[9].endMs>=r[1])},m(h,p){b(h,e,p),m&&m.m(e,null),v(e,t),v(e,s),v(s,i),v(e,d),v(e,o),v(o,c),v(o,a),v(o,f),v(e,E)},p(h,p){h[9].startMs<=h[1]&&h[9].endMs>=h[1]?m||(m=T(),m.c(),m.m(e,t)):m&&(m.d(1),m=null),p&1&&l!==(l=h[9].summary+"")&&S(i,l),p&1&&n!==(n=h[9].start+"")&&S(c,n),p&1&&_!==(_=h[9].end+"")&&S(f,_),p&3&&O(e,"starting",h[9].startMs-6e5<=h[1]&&h[9].startMs+3e5>=h[1]),p&3&&O(e,"active",h[9].startMs<=h[1]&&h[9].endMs>=h[1])},d(h){h&&u(e),m&&m.d()}}}function F(r,e){let t,s,l;function i(a,_){return a[5]!==a[4]?Y:X}let d=i(e),o=d(e),n=e[6],c=[];for(let a=0;a<n.length;a+=1)c[a]=z(B(e,n,a));return{key:r,first:null,c(){t=L(),o.c(),s=I();for(let a=0;a<c.length;a+=1)c[a].c();l=L(),this.h()},l(a){t=L(),o.l(a),s=N(a);for(let _=0;_<c.length;_+=1)c[_].l(a);l=L(),this.h()},h(){this.first=t},m(a,_){b(a,t,_),o.m(a,_),b(a,s,_);for(let f=0;f<c.length;f+=1)c[f].m(a,_);b(a,l,_)},p(a,_){if(e=a,d===(d=i(e))&&o?o.p(e,_):(o.d(1),o=d(e),o&&(o.c(),o.m(s.parentNode,s))),_&3){n=e[6];let f;for(f=0;f<n.length;f+=1){const E=B(e,n,f);c[f]?c[f].p(E,_):(c[f]=z(E),c[f].c(),c[f].m(l.parentNode,l))}for(;f<c.length;f+=1)c[f].d(1);c.length=n.length}},d(a){a&&u(t),o.d(a),a&&u(s),U(c,a),a&&u(l)}}}function Z(r){let e,t,s,l=[],i=new Map,d=Object.entries(r[0].eventsByDay);const o=n=>n[5];for(let n=0;n<d.length;n+=1){let c=q(r,d,n),a=o(c);i.set(a,l[n]=F(a,c))}return{c(){e=I(),t=k("section"),s=k("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){G('[data-svelte="svelte-z8c47p"]',document.head).forEach(u),e=N(n),t=y(n,"SECTION",{class:!0});var a=g(t);s=y(a,"UL",{class:!0});var _=g(s);for(let f=0;f<l.length;f+=1)l[f].l(_);_.forEach(u),a.forEach(u),this.h()},h(){document.title="C43 Events",M(s,"class","svelte-c5cct2"),M(t,"class","svelte-c5cct2")},m(n,c){b(n,e,c),b(n,t,c),v(t,s);for(let a=0;a<l.length;a+=1)l[a].m(s,null)},p(n,[c]){c&31&&(d=Object.entries(n[0].eventsByDay),l=Q(l,c,o,1,n,d,i,s,W,F,null,q))},i:A,o:A,d(n){n&&u(e),n&&u(t);for(let c=0;c<l.length;c+=1)l[c].d()}}}const ee=async({fetch:r})=>({props:{data:await(await r("index.json")).json()}});function $(r,e,t){let s,l;V(r,C,n=>t(2,l=n));const i=new Intl.DateTimeFormat("en",{hour12:!0,hour:"numeric",minute:"2-digit"});let{data:d={}}=e;const o=new Date().toString().split(" ")[0];return C.subscribe(n=>t(1,s=Number(n))),r.$$set=n=>{"data"in n&&t(0,d=n.data)},t(1,s=Date.now()),[d,s,l,i,o]}class te extends J{constructor(e){super();K(this,e,$,Z,R,{data:0})}}export{te as default,ee as load};
